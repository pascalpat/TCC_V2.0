<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gestion de projet — TCC App{% endblock %}</title>
    <!-- Base styles for header, footer, and general layout -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="header-container">
            <!-- Left: logo + weather -->
            <div class="left-info" >
                <img src="{{ url_for('static', filename='Projestim.png') }}" alt="Logo" class="logo">

                <!-- real‐today display -->
                <span id="todayDate" class="today‐label"></span>
                
                <!-- weather widget -->
                <div class="weather-widget" >
                    <img id="weatherIcon" src="" alt="Weather Icon">
                    <span id="currentTemperature">--°C</span>
                </div>
                
                <span id="todayDate"></span>
            </div>


            <!-- Center: title -->
            <div class="center-info">
                <h1>Gestion de projet — Module Rapport Journalier</h1>
            </div>


            <!-- Right: user greeting + logout -->
            <div class="right-info">
                <!-- Use the username if you have it in session, otherwise fall back to user_id -->
                <p class="greeting">Bonjour, {{ username or user_id }} !</p>
                <a href="{{ url_for('auth_bp.logout') }}" id="logoutButton">Log Out</a>
                </div>
        </div>
    </header>

    <!-- Main Section -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2025 MyCompany — Tous droits réservés.</p>
    </footer>

    <!-- Additional Scripts -->
    {% block extra_js %}
    <script type="module">
        import { getCurrentDate, highlightDates, getTemperature, restoreProgress }
          from "{{ url_for('static', filename='js/date_temp_loader.js') }}";
      
        document.addEventListener('DOMContentLoaded', () => {
          showToday();      // ← ensure this runs on load
          highlightDates();
          getTemperature();      // ← ensure this runs on load
          restoreProgress();
        });
      </script>
    {% endblock %}
</body>
</html>
